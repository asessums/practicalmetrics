```{r echo = FALSE}
library(dplyr)
library(salesforcer)
library(sqldf)
library(gt)
library(ggplot2)
library(knitr)
sf_auth()

last_week_proposals <- sprintf("SELECT Id, Name, HRA_Fees_Proposed__c, Office__c, PICText__c, Project_Manager__c, Proposal_Due_Date__c, Proposal_Type__c, Probability_of_Win__c, Anticipated_Budget_Range__c, Source__c FROM Project__c WHERE Stage__c = 'Proposal' AND Status__c NOT IN ('Dropped') AND Proposal_Due_Date__c >= 2020-09-27 AND Proposal_Due_Date__c <= 2020-10-03 ORDER BY Proposal_Due_Date__c")
proposals_query <- sf_query(last_week_proposals)

proposals <- sqldf("SELECT Id AS ID, Name as Project, Office__c AS Office, HRA_Fees_Proposed__c AS Fees FROM proposals_query")
```
---
title: 'Last Week's Proposal Analysis'
author: "Alex Sessums"
date: `r Sys.Date()`
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

## R Markdown Notebook Sample
Produced on `r Sys.Date()`

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r proposals_query}
summary(proposals_query)
```

## Including Plots

You can also embed plots, tables, and graphs. For example:

```{r fig.width = 3.5, fig.height = 4, echo = FALSE}
ggplot(title = 'Proposal $ by Office', data=proposals, aes(x = Office, y = Fees)) + 
  geom_bar(stat="identity", fill = "steelblue") + theme_minimal() + ggtitle("Proposal $ by Office")
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
